# Form Master Web Application

## Описание
Это веб-приложение на базе Flask, которое позволяет определять наиболее подходящий шаблон формы по предоставленным данным. 
Если подходящий шаблон не найден, приложение возвращает типы полей на основе валидаторов.

Приложение поддерживает следующие типы данных:

- Email (пример: `example@example.com`)
- Телефон (формат: `+7 xxx xxx xx xx`)
- Дата (форматы: `DD.MM.YYYY` или `YYYY-MM-DD`)
- Текст (любой другой формат).

Хранилище шаблонов реализовано на MongoDB.

## Запуск проекта

### Системные требования
- Docker и Docker Compose (для контейнеризации)
- Python 3.6+ (если запускать локально)

### Запуск с использованием Docker
1. **Клонируйте репозиторий:**
    ```bash
    git clone <ссылка-на-ваш-репозиторий>
    cd form_master
    ```
2. **Соберите и запустите контейнеры:**
    ```bash
    docker-compose up --build
    ```
3. **Инициализируйте базу данных с шаблонами:**
    ```bash
    docker-compose exec app python init_db.py
    ```    
4. **Приложение будет доступно по адресу: http://localhost:5000.**

### Запуск локально (без Docker)
1. **Убедитесь, что установлен Python 3.6+.**
2. **Установите зависимости:**
   ```bash
    pip install -r requirements.txt
    ```
3. **Запустите MongoDB локально на порту 27017.**
4. **Инициализируйте базу данных:**
    ```bash    
    python init_db.py
    ```
5. **Запустите приложение:**
   ```bash
    python init_db.py
    ```
6. **Приложение будет доступно по адресу: http://localhost:5000.**


## Использование приложения

**Эндпоинт** `/get_form`
- **Метод:** `POST`
- **Описание:** Сравнивает предоставленные данные формы с шаблонами в базе. Если совпадений нет, возвращает типы полей 
  на основе валидации.
- **Формат входных данных:** Данные передаются в теле запроса в формате `x-www-form-urlencoded` 
  (например: `field_name1=value1&field_name2=value2`).

**Пример запроса:**
```bash
curl -X POST http://localhost:5000/get_form \
     -d "email=test@example.com" \
     -d "phone=+7 123 456 78 90" \
     -d "order_date=2024-12-01"
```

**Ответ (шаблон найден):**
```bash
{
    "template_name": "Order Form"
}
```

**Ответ (шаблон не найден):**
```bash
{
    "email": "email",
    "phone": "phone",
    "order_date": "date"
}
```

## Тестирование
**Запустите скрипт для тестовых запросов:**
```bash
python test_requests.py
```

## Структура проекта
```bash
form_master/
├── app.py                # Основное приложение Flask
├── init_db.py            # Скрипт для инициализации базы данных
├── test_requests.py      # Скрипт для выполнения тестовых запросов
├── Dockerfile            # Docker-образ для Flask приложения
├── docker-compose.yml    # Конфигурация Docker Compose
├── requirements.txt      # Список зависимостей Python
└── README.md             # Документация

```